% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/functions.r
\name{dgm_interaction}
\alias{dgm_interaction}
\title{Data Generating Mechanism with Interaction-Based Selection}
\usage{
dgm_interaction(n, rg, prs_beta_x1, prs_beta_x2, y_prev, interaction_sel)
}
\arguments{
\item{n}{Integer. Sample size for the simulation.}

\item{rg}{Numeric. Genetic correlation between x1 and x2 PRS (0-1).}

\item{prs_beta_x1}{Numeric. Effect size of x1 PRS on exposure x1.}

\item{prs_beta_x2}{Numeric. Effect size of x2 PRS on exposure x2.}

\item{y_prev}{Numeric. Prevalence of outcome y in the population (0-1).}

\item{interaction_sel}{Numeric. Selection coefficient for the x1 * y interaction.
Positive values indicate the interaction increases selection probability.}
}
\value{
A tibble with the following columns:
\describe{
\item{prs_x1}{Polygenic risk score for exposure x1}
\item{prs_x2}{Polygenic risk score for exposure x2}
\item{x1}{Simulated exposure x1}
\item{x2}{Simulated exposure x2}
\item{y}{Binary outcome y (0/1)}
\item{selection}{Binary selection indicator (0/1)}
}
}
\description{
Simulates a dataset with polygenic risk scores (PRS), exposures x1 and x2,
outcome y, and selection indicators. Selection bias is based on the interaction
between exposure x1 and outcome y, rather than their main effects.
}
\details{
Unlike the main \code{dgm()} function which uses main effects for selection,
this function models selection based solely on the interaction between x1 and y.
The selection liability is calculated as (x1 * y) * interaction_sel, then
converted to probability using the logistic function. This creates a specific
type of selection bias where selection depends on the joint values of exposure
and outcome.
}
\examples{
\dontrun{
# Simulate data with interaction-based selection
data <- dgm_interaction(
  n = 10000,
  rg = 0.67,
  prs_beta_x1 = 0.3,
  prs_beta_x2 = 0.3,
  y_prev = 1/7,
  interaction_sel = 0.5
)
}

}
\seealso{
\code{\link{dgm}} for main effects selection, \code{\link{simulate_interaction_only}}
}
